#include <stdio.h>
#include <stdbool.h>

int longestBalanced(int* nums, int numsSize) {
    int maxLen = 0;

    for (int i = 0; i < numsSize; i++) {
        bool evenSeen[10001] = {false};
        bool oddSeen[10001] = {false};
        int evenCount = 0, oddCount = 0;

        for (int j = i; j < numsSize; j++) {
            int val = nums[j];

            if (val % 2 == 0) {
                if (!evenSeen[val]) {
                    evenSeen[val] = true;
                    evenCount++;
                }
            } else {
                if (!oddSeen[val]) {
                    oddSeen[val] = true;
                    oddCount++;
                }
            }

            if (evenCount == oddCount) {
                int len = j - i + 1;
                if (len > maxLen)
                    maxLen = len;
            }
        }
    }

    return maxLen;
}
